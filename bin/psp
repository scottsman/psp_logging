#! /usr/bin/env python

import logging

from psp.process_manager import ProcessManager
from psp.argument_parser import PspParser

# TODO connect logging level to the arguments.
# Set up logging
_log = logging.getLogger()
_handler = logging.StreamHandler()
_log.setLevel(logging.DEBUG)
_handler.setLevel(logging.DEBUG)
_log.addHandler(_handler)

# TODO move
_log_file = '/tmp/psp.log'
_current_process_file = '/tmp/current_process'

manager = ProcessManager(
    _log_file,
    _current_process_file
)

parser = PspParser()
args = parser.parse_args()

# TODO move these conditionals into a launcher class
action = args.action[0]
name = args.name[0]
if action == 'start':
    manager.start_process(name)
elif action == 'stop':
    manager.stop_process()
